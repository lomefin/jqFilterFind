(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};Array.prototype.unique=function(){var e,t,n,r,i,s;t={};for(e=r=0,i=this.length;0<=i?r<i:r>i;e=0<=i?++r:--r){t[this[e]]=this[e]}s=[];for(e in t){n=t[e];s.push(n)}return s};e=function(){function e(e){if(e==null){e={}}this.search=t(this.search,this);this.buildComponent=t(this.buildComponent,this);this.bind=t(this.bind,this);this["default"]=$.extend(true,this.defaults,{finderComparer:this.finderComparer,squatcher:this.squatcher});this.options=$.extend(true,this.defaults,e);window.options=this.options;window.instance=this}e.prototype.defaults={cardClass:"card",containerClass:"filter-finder-container",filters:[],finder:"lookup",filterClass:"input-medium",finderClass:"input-medium search-query",foundClass:"found",notFoundClass:"hidden"};e.prototype.bind=function(){var e,t=this;e=this.options.squatcher;this.filters={};this.searchTerms=[];$(this.options.filters).each(function(e,n){return t.filters[n]=[""]});$(this.options.filters).each(function(e,n){$("."+t.options.cardClass).each(function(e,r){var i;i=$(r).data(n);if(i!=null){return t.filters[n].push(i)}});return t.filters[n]=t.filters[n].unique()});$("."+this.options.cardClass).each(function(n,r){var i;i=e($(r).data(t.options.finder));$(r).data(t.options.finder,i);if(i!=null&&i.length>0){return t.searchTerms.push(i)}});this.searchTerms=this.searchTerms.unique();return this.buildComponent()};e.prototype.buildComponent=function(){var e,t,n=this;e=$("."+this.options.containerClass);$(this.options.filters).each(function(t,r){var i,s;i=$("<select>").attr("name","filter-"+r).addClass(n.options.filterClass);s=$("<label>").attr("for","filter-"+r).text(r);e.append(s).append(i);$(n.filters[r]).each(function(e,t){return i.append($("<option>").val(t).text(t))});return i.on("change",{cardClass:n.options.cardClass,dataElement:r},n.search)});t=$('<input type="text">').addClass(this.options.finderClass);e.append(t);return t.on("keyup",{cardClass:this.options.cardClass,dataElement:this.options.finder},this.search)};e.prototype.search=function(e){var t,n,r,i,s,o;t=this.options.finderComparer;r=this.options.foundClass;i=this.options.notFoundClass;n=e.data.dataElement;s=this.options;o=""+$(e.delegateTarget).val();return $("."+e.data.cardClass).each(function(e,s){if(t(o,$(s).data(n))){$(s).addClass(r);return $(s).removeClass(i)}else{$(s).addClass(i);return $(s).removeClass(r)}})};e.prototype.finderComparer=function(e,t){var n,r;r=e.toLowerCase().replace(/[ ]/g,"");n=new RegExp(r);return t.toString().match(n)!==null};e.prototype.squatcher=function(e){return e.toLowerCase().replace(/[ ]/g,"")};return e}();if(window.JQFilterFinder==null){window.JQFilterFinder=e}}).call(this)